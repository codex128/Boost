MaterialDef Simple {
    MaterialParameters {
        Texture2D DiffuseMap
        Texture2D NormalMap
        Color BaseColor : 1.0 1.0 1.0 1.0
        Float Metallic : 0.5
        Float Specular : 0.5
        Float Roughness : 0.5
        Float ParallaxHeight
        
        // hardware animation
        Int NumberOfBones
        Matrix4Array BoneMatrices
        FloatArray MorphWeights
        Int NumberOfMorphTargets
        Int NumberOfTargetsBuffers

        // shadows
        Int FilterMode
        Boolean HardwareShadows
        Texture2D ShadowMap0
        Texture2D ShadowMap1
        Texture2D ShadowMap2
        Texture2D ShadowMap3
        Texture2D ShadowMap4
        Texture2D ShadowMap5
        Float ShadowIntensity
        Vector4 Splits
        Vector2 FadeInfo
        Matrix4 LightViewProjectionMatrix0
        Matrix4 LightViewProjectionMatrix1
        Matrix4 LightViewProjectionMatrix2
        Matrix4 LightViewProjectionMatrix3
        Matrix4 LightViewProjectionMatrix4
        Matrix4 LightViewProjectionMatrix5   
        Vector3 LightPos
        Vector3 LightDir
        Float PCFEdge
        Float ShadowMapSize
        Boolean BackfaceShadows : false
    }
    Technique {
        LightMode SinglePassAndImageBased
        VertexShader GLSL120: ShaderBoostExamples/PBRTest.vert
        FragmentShader GLSL120: ShaderBoostExamples/PBRTest.frag     
        Defines {
            DIFFUSE_MAP         : DiffuseMap
            NORMAL_MAP          : NormalMap
            PARALLAX            : ParallaxHeight
            NB_BONES            : NumberOfBones
            NUM_MORPH_TARGETS   : NumberOfMorphTargets
            NUM_TARGETS_BUFFERS : NumberOfTargetsBuffers
        }
        WorldParameters {
            WorldViewProjectionMatrix
            CameraPosition
            WorldMatrix
            WorldNormalMatrix
            ViewProjectionMatrix
            ViewMatrix
        }
    }
    Technique PostShadow {
        VertexShader GLSL310 GLSL300 GLSL100 GLSL150:   ShaderBoost/shaders/Shadow.vert
        FragmentShader GLSL310 GLSL300 GLSL100 GLSL150: ShaderBoost/shaders/PostShadow.frag
        WorldParameters {
            WorldViewProjectionMatrix
            WorldMatrix
            ViewProjectionMatrix
            ViewMatrix
        }
        Defines {
            HARDWARE_SHADOWS    : HardwareShadows
            FILTER_MODE         : FilterMode
            PCFEDGE             : PCFEdge         
            SHADOWMAP_SIZE      : ShadowMapSize
            FADE                : FadeInfo
            PSSM                : Splits
            POINTLIGHT          : LightViewProjectionMatrix5
            INSTANCING          : UseInstancing
            BACKFACE_SHADOWS    : BackfaceShadows
            NB_BONES            : NumberOfBones
            NUM_MORPH_TARGETS   : NumberOfMorphTargets
            NUM_TARGETS_BUFFERS : NumberOfTargetsBuffers
        }
        ForcedRenderState {
            Blend Modulate
            DepthWrite Off
            PolyOffset -0.1 0
        }
    }
}